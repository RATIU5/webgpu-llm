<SYSTEM>TypeGPU Tooling: Build tools and CLI utilities for TypeGPU development</SYSTEM>

# TypeGPU Tooling

## Overview [Section titled “Overview”](#overview) TypeGPU provides two official tools for enhanced development workflows: * **unplugin-typegpu**: Build plugin enabling JavaScript-to-WGSL transpilation * **tgpu-gen**: CLI for generating TypeGPU definitions from existing WGSL files ## unplugin-typegpu [Section titled “unplugin-typegpu”](#unplugin-typegpu) Build plugin that hooks into your bundler to enable TGSL (TypeGPU Shading Language) features. ### Installation [Section titled “Installation”](#installation) ```bash npm install --save-dev unplugin-typegpu ``` ### Bundler Configuration [Section titled “Bundler Configuration”](#bundler-configuration) ### Plugin Options [Section titled “Plugin Options”](#plugin-options) Configuration options ```javascript typegpuPlugin({ include: ["**/*.ts", "**/*.tsx"], // Files to process exclude: ["node_modules/**"], // Files to skip autoNamingEnabled: true, // Auto-name resources from variables earlyPruning: true, // Skip files without TypeGPU code }) ``` ### Features [Section titled “Features”](#features) #### 1. “use gpu” Directive [Section titled “1. “use gpu” Directive”](#1-use-gpu-directive) Write shader functions in TypeScript that transpile to WGSL: Shell-less GPU functions ```typescript const computeDistance = (a: Vec2f, b: Vec2f) => { "use gpu"; const diff = std.sub(a, b); return std.length(diff); }; // Works both on CPU and GPU const cpuResult = computeDistance(vec2f(0, 0), vec2f(3, 4)); // 5.0 // Also generates WGSL for GPU execution ``` #### 2. Automatic Resource Naming [Section titled “2. Automatic Resource Naming”](#2-automatic-resource-naming) Without plugin: ```typescript const positionBuffer = root.createBuffer(d.arrayOf(d.vec3f, 100)) .$name("positionBuffer"); // Manual naming required ``` With plugin: ```typescript const positionBuffer = root.createBuffer(d.arrayOf(d.vec3f, 100)); // Automatically named "positionBuffer" from variable name ``` #### 3. Automatic External Detection [Section titled “3. Automatic External Detection”](#3-automatic-external-detection) Without plugin: ```typescript const shader = tgpu.fn([d.u32], d.void).does`(idx: u32) { positions[idx] = velocities[idx]; }`.$uses({ positions: posBuffer, velocities: velBuffer }); // Manual ``` With plugin: ```typescript const shader = tgpu.fn([d.u32], d.void).does`(idx: u32) { ${posBuffer}[idx] = ${velBuffer}[idx]; }`; // Externals detected automatically ``` ## tgpu-gen CLI [Section titled “tgpu-gen CLI”](#tgpu-gen-cli) Generates TypeGPU TypeScript definitions from existing WGSL shader files. ### Installation [Section titled “Installation”](#installation-1) ```bash # Use directly with npx npx tgpu-gen shader.wgsl # Or install globally npm install -g tgpu-gen ``` ### Basic Usage [Section titled “Basic Usage”](#basic-usage) Generate from single file ```bash tgpu-gen path/to/shader.wgsl # Creates shader.ts in same directory ``` Batch processing with globs ```bash tgpu-gen "shaders/*.wgsl" -o "generated/*.ts" # Recursive tgpu-gen "src/**/*.wgsl" -o "types/**/*.ts" ``` ### Watch Mode [Section titled “Watch Mode”](#watch-mode) Continuous generation ```bash tgpu-gen "shaders/*.wgsl" --output "generated/*.ts" --watch ``` ### Output Options [Section titled “Output Options”](#output-options) | Option | Description | | -------------- | --------------------------------------- | | `-o, --output` | Output path pattern | | `--keep` | Skip existing files | | `--overwrite` | Replace existing files | | `--commonjs` | Generate CommonJS instead of ES modules | ### Supported Extensions [Section titled “Supported Extensions”](#supported-extensions) Input: `.wgsl` Output: `.ts`, `.js`, `.mjs`, `.cjs`, `.mts`, `.cts` ### Example [Section titled “Example”](#example) input.wgsl ```wgsl struct Particle { position: vec3f, velocity: vec3f, } @group(0) @binding(0) var<storage, read_write> particles: array<Particle>; @compute @workgroup_size(64) fn updateParticles(@builtin(global_invocation_id) id: vec3u) { particles[id.x].position += particles[id.x].velocity; } ``` ```bash tgpu-gen input.wgsl ``` input.ts (generated) ```typescript import * as d from "typegpu/data"; import tgpu from "typegpu"; export const Particle = d.struct({ position: d.vec3f, velocity: d.vec3f, }); export const updateParticles = tgpu .computeFn({ workgroupSize: [64] }) .does(/* ... */); ``` ## When to Use Each Tool [Section titled “When to Use Each Tool”](#when-to-use-each-tool) | Scenario | Tool | | ----------------------- | ---------------------- | | New TypeGPU project | unplugin-typegpu | | Migrating existing WGSL | tgpu-gen | | React Native | unplugin-typegpu/babel | | Maximum type safety | Both together |